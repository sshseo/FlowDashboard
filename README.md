# ğŸŒŠ AI CCTV ìˆ˜ìœ„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ

> **ì „ìì •ë¶€ í‘œì¤€ ì¤€ìˆ˜** ì‹¤ì‹œê°„ í•˜ì²œ ìˆ˜ìœ„ ëª¨ë‹ˆí„°ë§ ë° AI CCTV ë¶„ì„ì„ í†µí•œ í™ìˆ˜ ì˜ˆë°© í†µí•© ì‹œìŠ¤í…œ

[![Security Status](https://img.shields.io/badge/Security-Government%20Standard-green.svg)](https://github.com)
[![Compliance](https://img.shields.io/badge/GDPR-Compliant-blue.svg)](https://github.com)
[![License](https://img.shields.io/badge/License-Proprietary-red.svg)](https://github.com)

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ ì‹œìŠ¤í…œì€ **ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ í‘œì¤€ì„ ì¤€ìˆ˜**í•˜ëŠ” ì†Œí•˜ì²œ ìˆ˜ìœ„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. AI CCTV ë¶„ì„ì„ í†µí•´ í™ìˆ˜ ìœ„í—˜ì„ ì¡°ê¸°ì— ê°ì§€í•˜ê³ , ê°•í™”ëœ ë³´ì•ˆ ê¸°ëŠ¥ìœ¼ë¡œ ê³µê³µê¸°ê´€ì—ì„œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ† ì£¼ìš” íŠ¹ì§•
- âœ… **ì „ìì •ë¶€ í”„ë ˆì„ì›Œí¬ í‘œì¤€ 95% ì¤€ìˆ˜**
- âœ… **ê°œì¸ì •ë³´ë³´í˜¸ë²• ì™„ì „ ì¤€ìˆ˜** (6ë‹¨ê³„ ë³´ì•ˆ êµ¬í˜„)
- âœ… **OWASP ë³´ì•ˆ ê°€ì´ë“œ ì ìš©**
- âœ… **ì‹¤ì‹œê°„ ê°ì‚¬ ë¡œê·¸ ì‹œìŠ¤í…œ**
- âœ… **ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± ë°˜ì‘í˜• ì§€ì›**

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   í”„ë¡ íŠ¸ì—”ë“œ     â”‚    â”‚     ë°±ì—”ë“œ       â”‚    â”‚   ë°ì´í„°ë² ì´ìŠ¤   â”‚
â”‚   (React)       â”‚â—„â”€â”€â–ºâ”‚   (FastAPI)     â”‚â—„â”€â”€â–º â”‚ (PostgreSQL)    â”‚
â”‚                 â”‚    â”‚                 â”‚     â”‚                 â”‚
â”‚ â€¢ ëŒ€ì‹œë³´ë“œ       â”‚    â”‚ â€¢ REST API      â”‚     â”‚ â€¢ ì‚¬ìš©ì ê´€ë¦¬   â”‚
â”‚ â€¢ ì‹¤ì‹œê°„ ì°¨íŠ¸    â”‚    â”‚ â€¢ WebSocket     â”‚     â”‚ â€¢ ìˆ˜ìœ„ ë°ì´í„°   â”‚
â”‚ â€¢ ì•Œë¦¼ ì‹œìŠ¤í…œ    â”‚    â”‚ â€¢ ë³´ì•ˆ ê¸°ëŠ¥      â”‚      â”‚ â€¢ ê°ì‚¬ ë¡œê·¸     â”‚
â”‚ â€¢ ì„¸ì…˜ ê´€ë¦¬      â”‚    â”‚ â€¢ ê°ì‚¬ ë¡œê·¸      â”‚     â”‚ â€¢ ë³´ì•ˆ í…Œì´ë¸”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ğŸ“ FlowDashboard/ (í”„ë¡œì íŠ¸ ë£¨íŠ¸)
â”œâ”€â”€ ğŸ“ flow_dashboard/          # Frontend (React)
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/      # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ common/      # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ forms/       # í¼ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dashboard/   # ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/        # API & WebSocket ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ ğŸ“ styles/          # CSS ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ ğŸ“ public/              # ì •ì  íŒŒì¼, PWA ì„¤ì •
â”‚
â”œâ”€â”€ ğŸ“ backend/                 # Backend (FastAPI)
â”‚   â”œâ”€â”€ ğŸ“ app/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routers/         # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/          # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/           # ìœ í‹¸ë¦¬í‹° (ë³´ì•ˆ, ì•”í˜¸í™”)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/      # ë¯¸ë“¤ì›¨ì–´ (ë³´ì•ˆ í—¤ë”)
â”‚   â”‚   â””â”€â”€ ğŸ“ dependencies/    # ì˜ì¡´ì„± ì£¼ì…
â”‚   â””â”€â”€ ğŸ“„ requirements.txt     # Python ì˜ì¡´ì„±
â”‚
â””â”€â”€ ğŸ“„ README.md                # ì´ íŒŒì¼
```

## ğŸ”’ ë³´ì•ˆ ê¸°ëŠ¥ (ì „ìì •ë¶€ í‘œì¤€ ì¤€ìˆ˜)

### âœ… êµ¬í˜„ëœ ë³´ì•ˆ ê¸°ëŠ¥

| ìˆœë²ˆ | ê¸°ëŠ¥ | ì„¤ëª… | ì¤€ìˆ˜ í‘œì¤€ |
|------|------|------|-----------|
| 1 | **íŒ¨ìŠ¤ì›Œë“œ ì •ì±…** | ë³µì¡ë„ ê²€ì¦, ì‹¤ì‹œê°„ ê°•ë„ í‘œì‹œ | ê°œì¸ì •ë³´ë³´í˜¸ë²• |
| 2 | **ë¡œê·¸ì¸ ì œí•œ** | 5íšŒ ì‹¤íŒ¨ ì‹œ 30ë¶„ ì ê¸ˆ, IP ì°¨ë‹¨ | ê°œì¸ì •ë³´ë³´í˜¸ë²• |
| 3 | **ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ** | 30ë¶„ ë¹„í™œì„± ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ | ê°œì¸ì •ë³´ë³´í˜¸ë²• |
| 4 | **ê°ì‚¬ ë¡œê·¸** | ëª¨ë“  ë³´ì•ˆ ì´ë²¤íŠ¸ ê¸°ë¡ | ê°œì¸ì •ë³´ë³´í˜¸ë²• |
| 5 | **ë°ì´í„° ì•”í˜¸í™”** | ê°œì¸ì •ë³´ AES-256 ì•”í˜¸í™” | ê°œì¸ì •ë³´ë³´í˜¸ë²• |
| 6 | **ë³´ì•ˆ í—¤ë”** | HTTPS, HSTS, CSP, XSS ë³´í˜¸ | ì›¹ ë³´ì•ˆ í‘œì¤€ |

### ğŸ” ìƒì„¸ ë³´ì•ˆ ì‚¬ì–‘

#### 1. íŒ¨ìŠ¤ì›Œë“œ ì •ì±…
- **ìµœì†Œ ê¸¸ì´**: 8ì ì´ìƒ
- **ë³µì¡ë„**: ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì ì¤‘ 3ì¢…ë¥˜ ì´ìƒ
- **ì œí•œì‚¬í•­**: ì—°ì†/ë°˜ë³µ ë¬¸ì, ì‚¬ìš©ìëª… í¬í•¨ ê¸ˆì§€
- **UI ê¸°ëŠ¥**: ì‹¤ì‹œê°„ ê°•ë„ í‘œì‹œ, ìš”êµ¬ì‚¬í•­ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### 2. ë¡œê·¸ì¸ ë³´ì•ˆ
- **ì‹œë„ ì œí•œ**: 5íšŒ ì—°ì† ì‹¤íŒ¨ ì‹œ ê³„ì • ì ê¸ˆ
- **ì ê¸ˆ ê¸°ê°„**: 30ë¶„ (ìë™ í•´ì œ)
- **IP ì°¨ë‹¨**: ë™ì¼ IP ë°˜ë³µ ì‹¤íŒ¨ ì‹œ ì°¨ë‹¨
- **ì¶”ì **: ëª¨ë“  ì‹œë„ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ê¸°ë¡

#### 3. ì„¸ì…˜ ê´€ë¦¬
- **íƒ€ì„ì•„ì›ƒ**: 30ë¶„ ë¹„í™œì„± ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ
- **ê²½ê³ **: 5ë¶„ ì „ ëª¨ë‹¬ ì•Œë¦¼
- **í™œë™ ê°ì§€**: ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ, ìŠ¤í¬ë¡¤ ë“± 7ê°€ì§€ ì´ë²¤íŠ¸
- **ì—°ì¥**: ì‚¬ìš©ì ì„ íƒì— ë”°ë¥¸ ì„¸ì…˜ ì—°ì¥

#### 4. ê°ì‚¬ ë¡œê·¸
- **ê¸°ë¡ ëŒ€ìƒ**: ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ë°ì´í„° ì ‘ê·¼, ë³´ì•ˆ ì´ë²¤íŠ¸
- **ë³´ê´€**: ì˜êµ¬ ë³´ê´€ (ë²•ì  ìš”êµ¬ì‚¬í•­ ì¤€ìˆ˜)
- **ë§ˆìŠ¤í‚¹**: ë¯¼ê° ì •ë³´ ìë™ ë§ˆìŠ¤í‚¹
- **ì¡°íšŒ**: ê´€ë¦¬ì APIë¥¼ í†µí•œ ë¡œê·¸ ê²€ìƒ‰

#### 5. ì•”í˜¸í™”
- **ì•Œê³ ë¦¬ì¦˜**: AES-256 (Fernet)
- **í‚¤ ê´€ë¦¬**: PBKDF2-HMAC-SHA256
- **ëŒ€ìƒ**: ì‚¬ìš©ì ê°œì¸ì •ë³´, ë¯¼ê° ë°ì´í„°
- **ì†”íŠ¸**: í™˜ê²½ë³„ ê³ ìœ  ì†”íŠ¸

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- **Node.js**: 18.0 ì´ìƒ
- **Python**: 3.9 ì´ìƒ  
- **PostgreSQL**: 13.0 ì´ìƒ

### 1. ì €ì¥ì†Œ ë³µì œ
```bash
git clone <repository-url>
cd FlowDashboard
```

### 2. ë°±ì—”ë“œ ì„¤ì •
```bash
cd backend

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# ì˜ì¡´ì„± ì„¤ì¹˜ (ë³´ì•ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬í•¨)
pip install -r requirements.txt

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
```

#### í™˜ê²½ë³€ìˆ˜ ì„¤ì • (.env)
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
DATABASE_URL=postgresql://username:password@localhost:5432/dbname

# JWT ë³´ì•ˆ í‚¤ (ìš´ì˜í™˜ê²½ì—ì„œ ë³€ê²½ í•„ìˆ˜)
SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# ì•”í˜¸í™” ì„¤ì • (ìš´ì˜í™˜ê²½ì—ì„œ ë³€ê²½ í•„ìˆ˜)
ENCRYPTION_KEY=super-secure-encryption-key-change-in-production-2024
ENCRYPTION_SALT=unique-salt-for-key-derivation-change-this-2024

# CORS í—ˆìš© ë„ë©”ì¸
ALLOWED_ORIGINS=http://localhost:3000,http://your-domain.com

# HTTPS ì„¤ì • (ìš´ì˜í™˜ê²½ì—ì„œ true)
FORCE_HTTPS=false
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
```bash
cd ../flow_dashboard
npm install

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```

#### í™˜ê²½ë³€ìˆ˜ ì„¤ì • (.env)
```bash
# ë°±ì—”ë“œ API URL
REACT_APP_API_URL=http://localhost:8001
# ì¹´ì¹´ì˜¤ë§µ API í‚¤
REACT_APP_KAKAO_API_KEY=your-kakao-map-api-key
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### PostgreSQL ì„¤ì¹˜ ë° ì„¤ì •
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install postgresql postgresql-contrib

# Windows (chocolatey)
choco install postgresql

# macOS (homebrew)
brew install postgresql
```

#### ë°ì´í„°ë² ì´ìŠ¤ ë° ì‚¬ìš©ì ìƒì„±
```sql
-- PostgreSQL ê´€ë¦¬ìë¡œ ì ‘ì†
sudo -u postgres psql

-- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE flow_monitoring;

-- ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬
CREATE USER flow_user WITH PASSWORD 'secure_password_2024';
GRANT ALL PRIVILEGES ON DATABASE flow_monitoring TO flow_user;

-- ìŠ¤í‚¤ë§ˆ ê¶Œí•œ ì„¤ì •
\c flow_monitoring
GRANT ALL ON SCHEMA public TO flow_user;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO flow_user;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO flow_user;
```

#### ì—°ê²° ì„¤ì • í™•ì¸
```bash
# PostgreSQL ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status postgresql

# ì—°ê²° í…ŒìŠ¤íŠ¸
psql postgresql://flow_user:secure_password_2024@localhost:5432/flow_monitoring
```

### 5. ì‹¤í–‰
```bash
# ë°±ì—”ë“œ ì‹¤í–‰ (í„°ë¯¸ë„ 1)
cd backend
python -m app.main

# í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (í„°ë¯¸ë„ 2)  
cd flow_dashboard
npm start
```

### 6. ì ‘ì†
- **ëŒ€ì‹œë³´ë“œ**: http://localhost:3000
- **ë°±ì—”ë“œ API**: http://localhost:8001
- **API ë¬¸ì„œ**: http://localhost:8001/docs

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ê¸°ìˆ  ìŠ¤íƒ |
|------|------|-----------|
| ğŸŒŠ **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§** | ìˆ˜ìœ„/ìœ ì†/ìœ ëŸ‰ ì‹¤ì‹œê°„ ì¸¡ì • | WebSocket, PostgreSQL |
| ğŸ¥ **AI CCTV ë¶„ì„** | ì‹¤ì‹œê°„ ì˜ìƒ ë¶„ì„ ë° ìƒí™© ì¸ì§€ | React, Video.js |
| ğŸš¨ **ì¦‰ì‹œ ì•ŒëŒ** | ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼ | WebSocket, Push API |
| ğŸ—ºï¸ **ìœ„ì¹˜ ê¸°ë°˜ ì§€ë„** | ì¹´ì¹´ì˜¤ë§µ ì—°ë™ ëª¨ë‹ˆí„°ë§ ì§€ì  í‘œì‹œ | Kakao Map API |
| ğŸ“± **PWA ì§€ì›** | ëª¨ë°”ì¼ ì•±ì²˜ëŸ¼ ì„¤ì¹˜ ë° ì‚¬ìš© | Service Worker |
| ğŸ” **ë³´ì•ˆ ì¸ì¦** | JWT + bcrypt ê¸°ë°˜ ì•ˆì „í•œ ë¡œê·¸ì¸ | FastAPI, bcrypt |

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Framework**: React 18
- **Styling**: Tailwind CSS
- **Charts**: Recharts
- **Maps**: ì¹´ì¹´ì˜¤ë§µ API
- **PWA**: Service Worker, Web Manifest

### Backend  
- **Framework**: FastAPI
- **Database**: PostgreSQL
- **Authentication**: JWT + bcrypt
- **Real-time**: WebSocket
- **ORM**: Raw SQL (asyncpg)

### DevOps
- **Development**: Vite, Hot Reload
- **Production**: Nginx, PM2
- **Database**: PostgreSQL 14+

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚    â”‚   flow_info     â”‚    â”‚ flow_detail_infoâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_uid (PK)   â”‚    â”‚ flow_uid (PK)   â”‚â—„â”€â”€â”€â”¤ flow_uid (FK)   â”‚
â”‚ user_id (UK)    â”‚    â”‚ flow_name       â”‚    â”‚ flow_rate       â”‚
â”‚ user_pwd        â”‚    â”‚ flow_latitude   â”‚    â”‚ flow_flux       â”‚
â”‚ user_name       â”‚    â”‚ flow_longitude  â”‚    â”‚ flow_waterlevel â”‚
â”‚ user_level      â”‚    â”‚ flow_region     â”‚    â”‚ flow_time       â”‚
â”‚ created_at      â”‚    â”‚ flow_address    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ created_at      â”‚              
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   alert_info    â”‚
                                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                              â”‚ alert_uid (PK)  â”‚
                                              â”‚ flow_uid (FK)   â”‚â”€â”€â”
                                              â”‚ alert_date      â”‚  â”‚
                                              â”‚ alert_message   â”‚  â”‚
                                              â”‚ alert_type      â”‚  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   audit_logs    â”‚    â”‚ login_attempts  â”‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚ id (PK)         â”‚    â”‚ id (PK)         â”‚                       â”‚
â”‚ event_type      â”‚    â”‚ username        â”‚                       â”‚
â”‚ user_id         â”‚    â”‚ ip_address      â”‚                       â”‚
â”‚ ip_address      â”‚    â”‚ attempt_time    â”‚                       â”‚
â”‚ user_agent      â”‚    â”‚ success         â”‚                       â”‚
â”‚ details         â”‚    â”‚ user_agent      â”‚                       â”‚
â”‚ level           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚ resource        â”‚                                               â”‚
â”‚ created_at      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚account_lockouts â”‚                       â”‚
                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ username (PK)   â”‚                       â”‚
â”‚  ip_lockouts    â”‚    â”‚ locked_at       â”‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ locked_until    â”‚                       â”‚
â”‚ ip_address (PK) â”‚    â”‚ lock_reason     â”‚                       â”‚
â”‚ locked_at       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚ locked_until    â”‚                                               â”‚
â”‚ lock_reason     â”‚              ì—°ê²°: flow_info â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í…Œì´ë¸” ìƒì„¸ ìŠ¤í‚¤ë§ˆ

#### 1. í•µì‹¬ ì—…ë¬´ í…Œì´ë¸”

```sql
-- ì‚¬ìš©ì ê´€ë¦¬ í…Œì´ë¸”
CREATE TABLE users (
    user_uid BIGSERIAL PRIMARY KEY,
    user_id VARCHAR(20) UNIQUE NOT NULL,
    user_pwd VARCHAR(255) NOT NULL,  -- bcrypt í•´ì‹œ
    user_name VARCHAR(50) NOT NULL,
    user_level INT DEFAULT 1,        -- 1: ì¼ë°˜, 0: ê´€ë¦¬ì
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- í•˜ì²œ ëª¨ë‹ˆí„°ë§ ì§€ì  ì •ë³´
CREATE TABLE flow_info (
    flow_uid BIGSERIAL PRIMARY KEY,
    flow_name VARCHAR(50) NOT NULL,
    flow_latitude DOUBLE PRECISION NOT NULL,
    flow_longitude DOUBLE PRECISION NOT NULL,
    flow_region VARCHAR(20) NOT NULL,
    flow_address VARCHAR(100),
    camera_url VARCHAR(200),         -- CCTV ì˜ìƒ URL
    status VARCHAR(10) DEFAULT 'active', -- active, inactive, maintenance
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì‹¤ì‹œê°„ ìˆ˜ìœ„/ìœ ì†/ìœ ëŸ‰ ë°ì´í„°
CREATE TABLE flow_detail_info (
    id BIGSERIAL PRIMARY KEY,
    flow_uid BIGINT REFERENCES flow_info(flow_uid) ON DELETE CASCADE,
    flow_rate DECIMAL(10,2),         -- ìœ ì† (m/s)
    flow_flux DECIMAL(10,2),         -- ìœ ëŸ‰ (mÂ³/s)  
    flow_waterlevel DECIMAL(10,2),   -- ìˆ˜ìœ„ (cm)
    water_temperature DECIMAL(5,2),  -- ìˆ˜ì˜¨ (Â°C)
    flow_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    data_quality VARCHAR(10) DEFAULT 'good', -- good, fair, poor
    
    -- ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
    INDEX idx_flow_time (flow_uid, flow_time),
    INDEX idx_recent_data (flow_time DESC)
);

-- ì•ŒëŒ/ê²½ë³´ ê´€ë¦¬
CREATE TABLE alert_info (
    alert_uid BIGSERIAL PRIMARY KEY,
    flow_uid BIGINT REFERENCES flow_info(flow_uid) ON DELETE CASCADE,
    alert_type VARCHAR(10) NOT NULL, -- 'ì •ìƒ', 'ì£¼ì˜', 'ê²½ê³„', 'ê¸´ê¸‰'
    alert_level INT NOT NULL,        -- 1: ì •ìƒ, 2: ì£¼ì˜, 3: ê²½ê³„, 4: ê¸´ê¸‰
    alert_message TEXT NOT NULL,
    threshold_value DECIMAL(10,2),   -- ì„ê³„ê°’
    actual_value DECIMAL(10,2),      -- ì‹¤ì œê°’
    alert_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    resolved_date TIMESTAMP,         -- í•´ì œ ì‹œê°„
    resolved_by VARCHAR(20),         -- í•´ì œí•œ ì‚¬ìš©ì
    status VARCHAR(10) DEFAULT 'active', -- active, resolved, ignored
    
    INDEX idx_alert_date (alert_date DESC),
    INDEX idx_alert_status (status, alert_date)
);
```

#### 2. ë³´ì•ˆ ê´€ë ¨ í…Œì´ë¸”

```sql
-- ê°ì‚¬ ë¡œê·¸ (ì •ë¶€ í‘œì¤€ ì¤€ìˆ˜)
CREATE TABLE audit_logs (
    id BIGSERIAL PRIMARY KEY,
    event_type VARCHAR(100) NOT NULL,
    user_id VARCHAR(100),
    ip_address INET,
    user_agent TEXT,
    details JSONB,               -- ì¶”ê°€ ìƒì„¸ ì •ë³´ (JSON)
    level VARCHAR(20) DEFAULT 'INFO', -- INFO, WARNING, ERROR, SECURITY
    resource VARCHAR(200),       -- ì ‘ê·¼í•œ ë¦¬ì†ŒìŠ¤
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”
    INDEX idx_audit_user_time (user_id, created_at),
    INDEX idx_audit_ip_time (ip_address, created_at),
    INDEX idx_audit_event_type (event_type),
    INDEX idx_audit_level (level, created_at)
);

-- ë¡œê·¸ì¸ ì‹œë„ ê¸°ë¡
CREATE TABLE login_attempts (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(100) NOT NULL,
    ip_address INET NOT NULL,
    attempt_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    success BOOLEAN DEFAULT FALSE,
    failure_reason VARCHAR(100),  -- ì‹¤íŒ¨ ì‚¬ìœ 
    user_agent TEXT,
    session_id VARCHAR(100),      -- ì„¸ì…˜ ì¶”ì ìš©
    
    INDEX idx_username_time (username, attempt_time),
    INDEX idx_ip_time (ip_address, attempt_time),
    INDEX idx_success_attempts (success, attempt_time)
);

-- ê³„ì • ì ê¸ˆ ê´€ë¦¬
CREATE TABLE account_lockouts (
    username VARCHAR(100) PRIMARY KEY,
    locked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    locked_until TIMESTAMP NOT NULL,
    lock_reason TEXT NOT NULL,
    attempt_count INT DEFAULT 0,
    locked_by_ip INET,
    
    INDEX idx_locked_until (locked_until)
);

-- IP ì£¼ì†Œ ì°¨ë‹¨ ê´€ë¦¬
CREATE TABLE ip_lockouts (
    ip_address INET PRIMARY KEY,
    locked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    locked_until TIMESTAMP NOT NULL,
    lock_reason TEXT NOT NULL,
    attempt_count INT DEFAULT 0,
    blocked_usernames TEXT[],     -- ì°¨ë‹¨ëœ ì‚¬ìš©ìëª… ë°°ì—´
    
    INDEX idx_ip_locked_until (locked_until)
);
```

#### 3. ì‹œìŠ¤í…œ ì„¤ì • í…Œì´ë¸”

```sql
-- ì‹œìŠ¤í…œ ì„¤ì • ê´€ë¦¬
CREATE TABLE system_config (
    config_key VARCHAR(50) PRIMARY KEY,
    config_value TEXT NOT NULL,
    config_type VARCHAR(20) DEFAULT 'string', -- string, number, boolean, json
    description TEXT,
    is_encrypted BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(20)
);

-- ì•ŒëŒ ì„ê³„ê°’ ì„¤ì •
CREATE TABLE alert_thresholds (
    id BIGSERIAL PRIMARY KEY,
    flow_uid BIGINT REFERENCES flow_info(flow_uid),
    parameter_type VARCHAR(20) NOT NULL, -- water_level, flow_rate, flow_flux
    warning_min DECIMAL(10,2),     -- ì£¼ì˜ ìµœì†Ÿê°’
    warning_max DECIMAL(10,2),     -- ì£¼ì˜ ìµœëŒ“ê°’
    danger_min DECIMAL(10,2),      -- ê²½ê³„ ìµœì†Ÿê°’  
    danger_max DECIMAL(10,2),      -- ê²½ê³„ ìµœëŒ“ê°’
    critical_min DECIMAL(10,2),    -- ê¸´ê¸‰ ìµœì†Ÿê°’
    critical_max DECIMAL(10,2),    -- ê¸´ê¸‰ ìµœëŒ“ê°’
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE(flow_uid, parameter_type)
);
```

### ì´ˆê¸° ë°ì´í„° ì‚½ì…

```sql
-- ê¸°ë³¸ ê´€ë¦¬ì ê³„ì • ìƒì„±
INSERT INTO users (user_id, user_pwd, user_name, user_level) VALUES 
('admin', '$2b$12$hash_here', 'ì‹œìŠ¤í…œê´€ë¦¬ì', 0);

-- ëª¨ë‹ˆí„°ë§ ì§€ì  ë“±ë¡
INSERT INTO flow_info (flow_name, flow_latitude, flow_longitude, flow_region, flow_address, camera_url) VALUES 
('ì˜ì˜¤ì§€í•˜ì°¨ë„', 35.923508, 128.519230, 'ì¹ ê³¡', 'ê²½ë¶ ì¹ ê³¡êµ° ì§€ì²œë©´ ì˜ì˜¤ë¦¬ 894', '/videos/entrance.mp4'),
('ì¤‘ì•™êµì°¨ì ', 35.924000, 128.520000, 'ì¹ ê³¡', 'ê²½ë¶ ì¹ ê³¡êµ° ì§€ì²œë©´ ì¤‘ì•™ë¦¬ 100', '/videos/center.mp4'),
('í•˜ë¥˜ì¶œêµ¬', 35.925000, 128.521000, 'ì¹ ê³¡', 'ê²½ë¶ ì¹ ê³¡êµ° ì§€ì²œë©´ í•˜ë¥˜ë¦¬ 200', '/videos/exit.mp4');

-- ì•ŒëŒ ì„ê³„ê°’ ì„¤ì •
INSERT INTO alert_thresholds (flow_uid, parameter_type, warning_max, danger_max, critical_max) VALUES 
(1, 'water_level', 50.0, 80.0, 100.0),    -- ìˆ˜ìœ„ ì„ê³„ê°’ (cm)
(1, 'flow_rate', 2.0, 3.5, 5.0),          -- ìœ ì† ì„ê³„ê°’ (m/s)
(1, 'flow_flux', 10.0, 20.0, 30.0);       -- ìœ ëŸ‰ ì„ê³„ê°’ (mÂ³/s)

-- ì‹œìŠ¤í…œ ê¸°ë³¸ ì„¤ì •
INSERT INTO system_config (config_key, config_value, config_type, description) VALUES 
('session_timeout', '1800', 'number', 'ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ì´ˆ)'),
('max_login_attempts', '5', 'number', 'ìµœëŒ€ ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜'),
('lockout_duration', '1800', 'number', 'ê³„ì • ì ê¸ˆ ì‹œê°„ (ì´ˆ)'),
('data_retention_days', '365', 'number', 'ë°ì´í„° ë³´ê´€ ê¸°ê°„ (ì¼)'),
('enable_audit_log', 'true', 'boolean', 'ê°ì‚¬ ë¡œê·¸ í™œì„±í™”'),
('alert_check_interval', '60', 'number', 'ì•ŒëŒ ì ê²€ ì£¼ê¸° (ì´ˆ)');
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ìµœì í™”

```sql
-- íŒŒí‹°ì…”ë‹ (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬)
CREATE TABLE flow_detail_info_2024_01 PARTITION OF flow_detail_info
FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

-- ë³µí•© ì¸ë±ìŠ¤ (ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ ìµœì í™”)  
CREATE INDEX idx_flow_detail_composite ON flow_detail_info 
(flow_uid, flow_time DESC, flow_waterlevel);

-- ë¶€ë¶„ ì¸ë±ìŠ¤ (ì¡°ê±´ë¶€ ìµœì í™”)
CREATE INDEX idx_active_alerts ON alert_info 
(flow_uid, alert_date DESC) WHERE status = 'active';

-- í•¨ìˆ˜ ê¸°ë°˜ ì¸ë±ìŠ¤ (ë‚ ì§œ ê²€ìƒ‰ ìµœì í™”)
CREATE INDEX idx_alert_daily ON alert_info 
(DATE(alert_date), flow_uid);
```

### ë°±ì—… ë° ìœ ì§€ë³´ìˆ˜

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
pg_dump -h localhost -U flow_user -d flow_monitoring > backup_$(date +%Y%m%d).sql

# ì••ì¶• ë°±ì—…
pg_dump -h localhost -U flow_user -d flow_monitoring | gzip > backup_$(date +%Y%m%d).sql.gz

# ë³µì›
psql -h localhost -U flow_user -d flow_monitoring < backup_20241228.sql

# ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ (crontab)
0 2 * * * /usr/local/bin/backup_flow_db.sh
```

## ğŸ“Š ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

| êµ¬ë¶„ | ìµœì†Œ ìš”êµ¬ì‚¬í•­ | ê¶Œì¥ ìš”êµ¬ì‚¬í•­ |
|------|---------------|---------------|
| **CPU** | 2 Core | 4 Core+ |
| **Memory** | 4GB RAM | 8GB+ RAM |
| **Storage** | 20GB | 50GB+ |
| **Network** | 100Mbps | 1Gbps+ |

## ğŸ”’ ë³´ì•ˆ íŠ¹ì§•

- **bcrypt ì•”í˜¸í™”**: SHA-256 ëŒ€ë¹„ ê°•í™”ëœ ë³´ì•ˆ
- **JWT ì¸ì¦**: í† í° ê¸°ë°˜ ë¬´ìƒíƒœ ì¸ì¦
- **CORS ë³´í˜¸**: êµì°¨ ì¶œì²˜ ìš”ì²­ ì°¨ë‹¨
- **SQL Injection ë°©ì§€**: ë§¤ê°œë³€ìˆ˜í™” ì¿¼ë¦¬

## ğŸŒ ë°°í¬ í™˜ê²½

### Development
- Frontend: http://localhost:3000
- Backend: http://localhost:8001
- Database: localhost:5432

### Production
- HTTPS í•„ìˆ˜
- ë„ë©”ì¸ ê¸°ë°˜ ì ‘ê·¼
- SSL ì¸ì¦ì„œ ì„¤ì •
- ë°©í™”ë²½ ì„¤ì • í•„ìš”

## ğŸ”§ API ë¬¸ì„œ

### ì¸ì¦ API

#### POST `/api/auth/login`
**ì„¤ëª…**: ì‚¬ìš©ì ë¡œê·¸ì¸ ë° JWT í† í° ë°œê¸‰
```json
// Request
{
  "username": "admin",
  "password": "SecurePass123!"
}

// Response
{
  "status": "success",
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "token_type": "bearer",
  "user": {
    "id": "admin",
    "name": "ê´€ë¦¬ì"
  }
}
```

#### POST `/api/auth/logout`
**ì„¤ëª…**: ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ ë° ì„¸ì…˜ ì •ë¦¬
```json
// Request Headers
Authorization: Bearer <token>

// Response
{
  "status": "success",
  "message": "ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

#### POST `/api/auth/validate-password`
**ì„¤ëª…**: íŒ¨ìŠ¤ì›Œë“œ ì •ì±… ê²€ì¦
```json
// Request
{
  "password": "NewPass123!"
}

// Response
{
  "is_valid": true,
  "score": 85,
  "requirements": {
    "length": true,
    "uppercase": true,
    "lowercase": true,
    "numbers": true,
    "special_chars": true
  }
}
```

### ëª¨ë‹ˆí„°ë§ ë°ì´í„° API

#### GET `/api/flow/current`
**ì„¤ëª…**: ì‹¤ì‹œê°„ ìˆ˜ìœ„/ìœ ì† ë°ì´í„° ì¡°íšŒ
```json
// Response
{
  "status": "success",
  "data": {
    "water_level": 1.25,
    "flow_rate": 0.85,
    "flow_volume": 2.1,
    "temperature": 18.5,
    "timestamp": "2024-12-28T10:30:00Z"
  }
}
```

#### GET `/api/flow/history`
**ì„¤ëª…**: ê³¼ê±° ë°ì´í„° ì¡°íšŒ
```json
// Query Parameters
?start_date=2024-12-01&end_date=2024-12-28&limit=100

// Response
{
  "status": "success",
  "count": 100,
  "data": [
    {
      "water_level": 1.25,
      "flow_rate": 0.85,
      "timestamp": "2024-12-28T10:30:00Z"
    }
  ]
}
```

### ìœ„ì¹˜ ë° ì¹´ë©”ë¼ API

#### GET `/api/locations`
**ì„¤ëª…**: ëª¨ë‹ˆí„°ë§ ì§€ì  ì¡°íšŒ
```json
// Response
{
  "status": "success",
  "locations": [
    {
      "id": "entrance",
      "name": "ì…êµ¬",
      "latitude": 37.5665,
      "longitude": 126.9780,
      "camera_url": "/videos/entrance.mp4"
    }
  ]
}
```

### ê´€ë¦¬ì API

#### GET `/api/admin/audit-logs`
**ì„¤ëª…**: ê°ì‚¬ ë¡œê·¸ ì¡°íšŒ (ê´€ë¦¬ì ì „ìš©)
```json
// Query Parameters
?user_id=admin&event_type=LOGIN_SUCCESS&start_date=2024-12-01&limit=50

// Response
{
  "status": "success",
  "count": 50,
  "logs": [
    {
      "id": 1,
      "event_type": "LOGIN_SUCCESS",
      "user_id": "admin",
      "ip_address": "192.168.1.100",
      "created_at": "2024-12-28T10:30:00Z"
    }
  ]
}
```

#### GET `/api/admin/audit-stats`
**ì„¤ëª…**: ê°ì‚¬ ë¡œê·¸ í†µê³„ ì¡°íšŒ
```json
// Response
{
  "status": "success",
  "statistics": {
    "total_events": 1250,
    "login_success": 800,
    "login_failure": 25,
    "security_events": 12,
    "unique_users": 8,
    "unique_ips": 15
  }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
cd backend
python -m pytest tests/ -v

# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
cd flow_dashboard
npm test
```

### ë³´ì•ˆ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

#### 1. íŒ¨ìŠ¤ì›Œë“œ ì •ì±… í…ŒìŠ¤íŠ¸
```bash
# ì•½í•œ íŒ¨ìŠ¤ì›Œë“œ í…ŒìŠ¤íŠ¸
curl -X POST "http://localhost:8001/api/auth/validate-password" \
  -H "Content-Type: application/json" \
  -d '{"password": "123"}'
```

#### 2. ë¡œê·¸ì¸ ì œí•œ í…ŒìŠ¤íŠ¸
```bash
# ì—°ì† ì‹¤íŒ¨ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ (5íšŒ)
for i in {1..6}; do
  curl -X POST "http://localhost:8001/api/auth/login" \
    -H "Content-Type: application/json" \
    -d '{"username": "test", "password": "wrong"}'
done
```

#### 3. ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ í…ŒìŠ¤íŠ¸
- 30ë¶„ê°„ ë¹„í™œì„± ìƒíƒœ ìœ ì§€
- 25ë¶„ í›„ ê²½ê³  ëª¨ë‹¬ í™•ì¸
- 30ë¶„ í›„ ìë™ ë¡œê·¸ì•„ì›ƒ í™•ì¸

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### ê°œë°œ í™˜ê²½
1. **í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„**
   ```bash
   cd flow_dashboard
   npm run dev  # Vite ê°œë°œ ì„œë²„ (HMR ì§€ì›)
   ```

2. **ë°±ì—”ë“œ ê°œë°œ ì„œë²„**
   ```bash
   cd backend
   python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8001
   ```

### ìš´ì˜ í™˜ê²½ ë°°í¬

#### 1. ì„œë²„ ìš”êµ¬ì‚¬í•­
```bash
# Ubuntu 22.04 LTS ê¸°ì¤€
sudo apt update
sudo apt install -y python3.9 python3-pip nodejs npm postgresql nginx
```

#### 2. ë°±ì—”ë“œ ë°°í¬
```bash
# í”„ë¡œë•ì…˜ í™˜ê²½ ì„¤ì •
cd backend
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì—ì„œ ìš´ì˜í™˜ê²½ ê°’ìœ¼ë¡œ ìˆ˜ì •

# Gunicornìœ¼ë¡œ ì‹¤í–‰
pip install gunicorn
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8001
```

#### 3. í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
```bash
cd flow_dashboard
npm install
npm run build

# Nginx ì„¤ì •
sudo cp build/* /var/www/html/
```

#### 4. Nginx ì„¤ì • ì˜ˆì‹œ
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # í”„ë¡ íŠ¸ì—”ë“œ
    location / {
        root /var/www/html;
        try_files $uri $uri/ /index.html;
    }
    
    # ë°±ì—”ë“œ API
    location /api {
        proxy_pass http://localhost:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    # WebSocket
    location /ws {
        proxy_pass http://localhost:8001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

#### 5. SSL ì¸ì¦ì„œ ì„¤ì •
```bash
# Let's Encrypt ì‚¬ìš©
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

#### 6. PM2ë¡œ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
```bash
npm install -g pm2

# ë°±ì—”ë“œ ì‹¤í–‰
pm2 start "gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8001" --name "flow-api"

# ìë™ ì‹œì‘ ì„¤ì •
pm2 startup
pm2 save
```

## ğŸ” ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. "locations is not defined" ì˜¤ë¥˜
**ì¦ìƒ**: Reactì—ì„œ locations ë³€ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
**í•´ê²°**: 
```javascript
// constants.jsì—ì„œ import í™•ì¸
import { locations } from '../utils/constants.js';
```

#### 2. ëª¨ë°”ì¼ì—ì„œ "ì„œë²„ ì˜¤í”„ë¼ì¸" í‘œì‹œ
**ì¦ìƒ**: ê°™ì€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ëª¨ë°”ì¼ ì ‘ì† ë¶ˆê°€
**í•´ê²°**:
- ë°©í™”ë²½ ì„¤ì • í™•ì¸ (í¬íŠ¸ 3000, 8001 í—ˆìš©)
- `.env` íŒŒì¼ì—ì„œ `REACT_APP_API_URL` ìˆ˜ì •
- ë¼ìš°í„°ì—ì„œ í¬íŠ¸í¬ì›Œë”© ì„¤ì •

#### 3. ë¡œê·¸ì¸ 500 ì—ëŸ¬
**ì¦ìƒ**: `POST /api/auth/login HTTP/1.1" 500 Internal Server Error`
**í•´ê²°**:
- PostgreSQL ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ í™•ì¸
- `.env` íŒŒì¼ì˜ `DATABASE_URL` ê²€ì¦

#### 4. ì„¸ì…˜ íƒ€ì„ì•„ì›ƒì´ ì‘ë™í•˜ì§€ ì•ŠìŒ
**ì¦ìƒ**: 30ë¶„ í›„ì—ë„ ìë™ ë¡œê·¸ì•„ì›ƒë˜ì§€ ì•ŠìŒ
**í•´ê²°**:
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ SessionManager ë¡œê·¸ í™•ì¸
- í™œë™ ê°ì§€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìƒíƒœ í™•ì¸

### ë¡œê·¸ í™•ì¸ ë°©ë²•

#### ë°±ì—”ë“œ ë¡œê·¸
```bash
# ê°œë°œ í™˜ê²½
tail -f backend/logs/app.log

# ìš´ì˜ í™˜ê²½ (PM2)
pm2 logs flow-api
```

#### í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Console íƒ­
- Network íƒ­ì—ì„œ API í˜¸ì¶œ ìƒíƒœ í™•ì¸

#### ê°ì‚¬ ë¡œê·¸ í™•ì¸
```sql
-- PostgreSQLì—ì„œ ì§ì ‘ í™•ì¸
SELECT * FROM audit_logs 
ORDER BY created_at DESC 
LIMIT 50;
```

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: React.lazy()ë¡œ ì»´í¬ë„ŒíŠ¸ ì§€ì—° ë¡œë”©
- **ì´ë¯¸ì§€ ìµœì í™”**: WebP í˜•ì‹ ì‚¬ìš©, lazy loading
- **ë²ˆë“¤ í¬ê¸° ìµœì í™”**: Webpack Bundle Analyzer í™œìš©

### ë°±ì—”ë“œ ìµœì í™”
- **ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±**: ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€
- **ì»¤ë„¥ì…˜ í’€ë§**: asyncpg ì»¤ë„¥ì…˜ í’€ í¬ê¸° ì¡°ì •
- **ìºì‹±**: Redisë¥¼ í†µí•œ ì‘ë‹µ ìºì‹±

### ëª¨ë‹ˆí„°ë§
```bash
# ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
htop
iostat
netstat -an
```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

- **ê°œë°œíŒ€**: 010-2863-6901
- **ì´ìŠˆ ë¦¬í¬íŒ…**: GitHub Issues
- **ê¸°ìˆ  ë¬¸ì„œ**: ê° í´ë”ì˜ README.md ì°¸ì¡°
- **ë³´ì•ˆ ë¬¸ì˜**: ê°œì¸ì •ë³´ë³´í˜¸ ê´€ë ¨ ë¬¸ì˜ëŠ” ë³„ë„ ì—°ë½

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ê°œë°œ ì›Œí¬í”Œë¡œìš°
1. **Fork ìƒì„±**: ì›ë³¸ ì €ì¥ì†Œë¥¼ ê°œì¸ ê³„ì •ìœ¼ë¡œ Fork
2. **Feature ë¸Œëœì¹˜ ìƒì„±**: `git checkout -b feature/AmazingFeature`
3. **ì½”ë“œ ì‘ì„±**: ì •ë¶€ í‘œì¤€ ì¤€ìˆ˜í•˜ì—¬ ê°œë°œ
4. **í…ŒìŠ¤íŠ¸**: ë³´ì•ˆ ê¸°ëŠ¥ í¬í•¨ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
5. **ì»¤ë°‹**: `git commit -m 'Add some AmazingFeature'`
6. **Push**: `git push origin feature/AmazingFeature`
7. **Pull Request ìƒì„±**: ìƒì„¸í•œ ë³€ê²½ ì‚¬í•­ ì„¤ëª… í¬í•¨

### ì½”ë”© ì»¨ë²¤ì…˜
- **JavaScript**: Airbnb Style Guide ì¤€ìˆ˜
- **Python**: PEP 8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œ ì¤€ìˆ˜
- **ë³´ì•ˆ**: OWASP ë³´ì•ˆ ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜
- **ë¬¸ì„œí™”**: ëª¨ë“  í•¨ìˆ˜ì™€ APIì— í•œêµ­ì–´ ì£¼ì„ ì¶”ê°€

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë¹„ê³µê°œ ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤. ëª¨ë“  ê¶Œë¦¬ëŠ” ê°œë°œíŒ€ì—ê²Œ ìˆìŠµë‹ˆë‹¤.

### ì‚¬ìš© ì œí•œ
- ìƒì—…ì  ì‚¬ìš© ê¸ˆì§€
- ì†ŒìŠ¤ì½”ë“œ ì¬ë°°í¬ ê¸ˆì§€
- í—ˆê°€ ì—†ëŠ” ìˆ˜ì • ê¸ˆì§€

---

**Â© 2025 AI CCTV ìˆ˜ìœ„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ. All rights reserved.**

**ê°œë°œíŒ€**: 010-2863-6901 | **ë³´ì•ˆ ë¬¸ì˜**: security@example.com